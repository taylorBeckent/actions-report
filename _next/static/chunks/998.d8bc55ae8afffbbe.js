(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{9998:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var n=s(4848),a=s(6540),o=s(2787),l=s.n(o),r=s(9173),i=s(1006),c=s(5293),d=s(4804),u=s(7350),p=s.n(u),_=s(4953),h=s.n(_);let{TextArea:m}=r.A;h()(()=>Promise.all([s.e(725),s.e(738)]).then(s.t.bind(s,4738,23)),{loadableGenerated:{webpack:()=>[4738]},ssr:!1});let v=()=>{let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(void 0),r=async()=>{if(console.log(s),s){let n=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(s));n.push({role:"user",message:a}),t(n),o(void 0),await _(a,n)}},u=(0,a.useMemo)(()=>p()(e=>{t(e)},50),[]);(0,a.useCallback)(e=>{requestAnimationFrame(()=>{u(e)})},[u]);let _=async(s,n)=>{let a=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({model:"deepseek/deepseek-r1-distill-llama-70b:free",stream:!0,messages:[{role:"user",content:s}]})});console.log(a);let o=a.body.getReader(),l=new TextDecoder;console.log(o,l);let r="",i=0;for(;;){let{done:s,value:a}=await o.read();if(console.log(s,a),s)break;let p=l.decode(a,{stream:!0}),_=p.split("\n");for(let s of(console.log(p,_),_))if(s.startsWith("data: ")){let a=s.slice(6);if("[DONE]"!==a){let s="";if(null==(s=h(a)?JSON.parse(a):{choices:[{delta:{content:""}}]})?void 0:s.error)try{let e=JSON.parse(s.error.metadata.raw);JSON.parse(e.error)}catch(e){}else{var c,d,u;r+=null==s?void 0:null===(d=s.choices[0])||void 0===d?void 0:null===(c=d.delta)||void 0===c?void 0:c.content;let a=JSON.parse(JSON.stringify(n));(null===(u=a[a.length-1])||void 0===u?void 0:u.answerIndex)==i?a[a.length-1].message=r:a.push({role:"deepSeek",message:r,answerIndex:i}),t(a),console.log(e,a)}}else i++}}console.log("str100",r,i)},h=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},v=async e=>{"Enter"!=e.key||e.shiftKey||e.ctrlKey?"Enter"==e.key&&(e.shiftKey||e.ctrlKey):(e.preventDefault(),await r())};return(0,n.jsx)("div",{className:l().contentNew,children:e&&e.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:l().conversion,children:e.map(e=>"user"==e.role?(0,n.jsx)("div",{className:l().user,children:(0,n.jsx)("div",{className:l()["user-context"],children:e.message})}):"deepSeek"==e.role?(0,n.jsxs)("div",{className:"".concat(l().assistant," ").concat(l()["markdown-wrapper"]),children:[(0,n.jsx)(i.o,{children:e.message,remarkPlugins:[d.A],rehypePlugins:[c.Ay]}),(0,n.jsx)("div",{className:l()["assistant-bottom"]})]}):void 0)}),(0,n.jsxs)("div",{className:l()["input-section"],children:[(0,n.jsx)(m,{autoSize:{minRows:1,maxRows:6},className:l()["input-field"],placeholder:"给 DeepSeek 发送消息",value:s,onChange:e=>{o(e.target.value)},onKeyDown:v}),(0,n.jsx)("div",{className:l()["send-button"],onClick:r,children:" ➤"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:l().header,children:"我是 DeepSeek, 很高兴见到你！"}),(0,n.jsx)("div",{className:l().tips,children:"我可以帮你写代码、读文件、写作各种创意内容，请把你的任务交给我吧~"}),(0,n.jsxs)("div",{className:l()["input-section"],children:[(0,n.jsx)(m,{autoSize:{minRows:1,maxRows:6},className:l()["input-field"],placeholder:"给 DeepSeek 发送消息",value:s,onChange:e=>{o(e.target.value)},onKeyDown:v}),(0,n.jsx)("div",{className:l()["send-button"],onClick:r,children:" ➤"})]})]})})}},2787:e=>{e.exports={content:"content_content__IMYCk",header:"content_header__3l5fK",tips:"content_tips__puLGC","input-section":"content_input-section__h__7O","input-field":"content_input-field__7C_wx","send-button":"content_send-button__yahcd",contentNew:"content_contentNew__QFwIL",conversion:"content_conversion__o24b_",user:"content_user__uETI_","user-context":"content_user-context__zYO17",assistant:"content_assistant__69J1C","assistant-bottom":"content_assistant-bottom__ENgg4","markdown-wrapper":"content_markdown-wrapper__jThag"}}}]);